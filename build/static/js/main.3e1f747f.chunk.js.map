{"version":3,"sources":["service/persons.js","App.js","index.js"],"names":["baseUrl","service_persons","axios","get","then","response","data","newObject","post","id","delete","concat","newPerson","put","Notification","_ref","notification","message","style","color","type","background","fontSize","borderStyle","borderRadius","padding","marginBottom","react_default","a","createElement","Filter","props","onChange","handleChange","value","Persons","persons","map","p","key","name","number","onClick","deletePerson","PersonForm","onSubmit","handleSubmit","handleNameChange","newName","handleNumberChange","newNumber","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","filter","setFilter","_useState9","_useState10","setNotification","useEffect","personService","notify","arguments","length","undefined","setTimeout","personsToShow","toLowerCase","includes","App_Notification","App_Filter","event","target","App_PersonForm","preventDefault","existingPerson","find","window","confirm","objectSpread","replacedPerson","catch","console","log","createdPerson","error","App_Persons","person","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.3e1f747f.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const req = axios.get(baseUrl)\n    return req.then(response => response.data)\n}\n\nconst create = (newObject) => {\n    const req = axios.post(baseUrl, newObject)\n    return req.then(response => response.data)\n}\n\nconst remove = (id) => {\n    const req = axios.delete(`${baseUrl}/${id}`)\n    return req.then(response => response.data)\n}\n\nconst update = (newPerson) => {\n    const req = axios.put(`${baseUrl}/${newPerson.id}`, newPerson)\n    return req.then(response => response.data)\n}\n\n\nexport default { getAll, create, remove, update }","\n\nimport React, { useState, useEffect } from 'react'\nimport personService from './service/persons'\n\nconst Notification = ({ notification }) => {\n    if (notification.message === null) {\n        return null\n    }\n\n    const style = {\n        color: notification.type === 'error' ? 'red' : 'green',\n        background: 'lightgrey',\n        fontSize: 20,\n        borderStyle: 'solid',\n        borderRadius: 5,\n        padding: 10,\n        marginBottom: 10,\n    }\n\n    return (\n        <div style={style}>\n            {notification.message}\n        </div>\n    )\n}\n\nconst Filter = (props) => {\n    return (\n        <div>\n            rajaa näytettäviä\n      <input onChange={props.handleChange} value={props.value} />\n        </div>\n    )\n}\n\nconst Persons = (props) => {\n    return (\n        props.persons.map(p =>\n            <div key={p.name}>\n                {p.name} {p.number} <button onClick={() => props.deletePerson(p.id)}>poista</button>\n            </div>\n        )\n    )\n}\n\nconst PersonForm = (props) => {\n    return (\n        <form onSubmit={props.handleSubmit}>\n            <div>\n                nimi: <input onChange={props.handleNameChange} value={props.newName} />\n            </div>\n            <div>\n                numero: <input onChange={props.handleNumberChange} value={props.newNumber} />\n            </div>\n            <div>\n                <button type=\"submit\">lisää</button>\n            </div>\n        </form>\n    )\n}\n\nconst App = () => {\n    const [persons, setPersons] = useState([])\n    const [newName, setNewName] = useState('')\n    const [newNumber, setNewNumber] = useState('')\n    const [filter, setFilter] = useState('')\n    const [notification, setNotification] = useState({\n        message: null\n    })\n\n    useEffect(() => {\n        personService.getAll()\n            .then(data => {\n                setPersons(data)\n            })\n    }, [])\n\n    const handleNameChange = (event) => setNewName(event.target.value)\n    const handleNumberChange = (event) => setNewNumber(event.target.value)\n    const handleFilterChange = (event) => setFilter(event.target.value)\n\n    const notify = (message, type = 'success') => {\n        setNotification({ message, type })\n        setTimeout(() => setNotification({ message: null }), 10000)\n    }\n\n    const handleSubmit = (event) => {\n        event.preventDefault()\n\n        const existingPerson = persons.find(p => p.name.toLowerCase() === newName.toLowerCase())\n        \n        if (existingPerson) {\n            const ok = window.confirm(`${newName} on jo luettelossa, korvataanko vanha numero uudella`)\n\n            if (ok) {\n                personService\n                    .update({\n                        ...existingPerson,\n                        number: newNumber\n                    })\n                    .then(replacedPerson => {\n                        setPersons(persons.map(p => p.name.toLowerCase() === newName.toLowerCase() ? replacedPerson : p))\n                        setNewName('')\n                        setNewNumber('')\n                        notify(`Henkilön ${newName} numero muutettu`)\n                    })\n\n                    .catch(() => {\n                        setPersons(persons.filter(p => p.name.toLowerCase() !== newName.toLowerCase()))\n                        notify(`Henkilön ${newName} oli jo poistettu`, 'error')\n                    })\n                    \n\n            }\n\n            return\n        }\n        console.log(persons)\n        personService\n            .create({\n                name: newName,\n                number: newNumber\n            })\n            .then(createdPerson => {\n                setPersons(persons.concat(createdPerson))\n                setNewName('')\n                setNewNumber('')\n                notify(`Lisättiin ${createdPerson.name}`)\n            })\n            .catch(error=>{\n                notify(error.response.data.error,'error')\n            })\n    }\n\n    const deletePerson = (id) => {\n        const person = persons.find(p => p.id === id)\n        const ok = window.confirm(`Poistetaanko ${person.name}`)\n        if (ok) {\n            personService\n                .remove(id)\n                .then(() => {\n                    setPersons(persons.filter(p => p.id !== id))\n                })\n            notify(`Poistettiin ${person.name}`)\n        }\n    }\n\n    const personsToShow = filter.length === 0\n        ? persons\n        : persons.filter(p => p.name.toLowerCase().includes(filter.toLowerCase()))\n\n    return (\n        <div>\n            <h2>Puhelinluettelo</h2>\n\n            <Notification notification={notification} />\n\n            <Filter handleChange={handleFilterChange} value={filter} />\n\n            <h3>lisää uusi</h3>\n\n            <PersonForm\n                handleNameChange={handleNameChange}\n                handleNumberChange={handleNumberChange}\n                handleSubmit={handleSubmit}\n                newName={newName}\n                newNumber={newNumber}\n            />\n\n            <h3>Numerot</h3>\n\n            <Persons persons={personsToShow} deletePerson={deletePerson} />\n        </div>\n    )\n\n}\n\nexport default App\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App'\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root'))\n"],"sourceRoot":""}